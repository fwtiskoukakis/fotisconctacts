# ğŸ“¸ Photo Upload System - Visual Guide

## ğŸ—ï¸ System Architecture

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                      ğŸ“± MOBILE APP                        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
        â”ƒ   Test Page        â”ƒ         â”ƒ  Production      â”ƒ
        â”ƒ   (Development)    â”ƒ         â”ƒ  Components      â”ƒ
        â”ƒ                    â”ƒ         â”ƒ                  â”ƒ
        â”ƒ â€¢ Camera button    â”ƒ         â”ƒ â€¢ Gallery        â”ƒ
        â”ƒ â€¢ Gallery button   â”ƒ         â”ƒ   Component      â”ƒ
        â”ƒ â€¢ Preview          â”ƒ         â”ƒ â€¢ Photo          â”ƒ
        â”ƒ â€¢ Upload           â”ƒ         â”ƒ   Capture        â”ƒ
        â”ƒ â€¢ Gallery          â”ƒ         â”ƒ                  â”ƒ
        â”—â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”›         â”—â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”›
                 â”‚                              â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”â”â”â”â”â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  PhotoStorageService  â”ƒ
                    â”ƒ                       â”ƒ
                    â”ƒ â€¢ Upload photos       â”ƒ
                    â”ƒ â€¢ Save metadata       â”ƒ
                    â”ƒ â€¢ Get photos          â”ƒ
                    â”ƒ â€¢ Delete photos       â”ƒ
                    â”—â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â”‚
              â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
              â”‚                                â”‚
    â”â”â”â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”“          â”â”â”â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”“
    â”ƒ  Supabase Storage â”ƒ          â”ƒ  PostgreSQL DB    â”ƒ
    â”ƒ                   â”ƒ          â”ƒ                   â”ƒ
    â”ƒ Buckets:          â”ƒ          â”ƒ Tables:           â”ƒ
    â”ƒ â€¢ contract-photos â”ƒ          â”ƒ â€¢ contract_photos â”ƒ
    â”ƒ â€¢ car-photos      â”ƒ          â”ƒ â€¢ contracts       â”ƒ
    â”ƒ â€¢ signatures      â”ƒ          â”ƒ                   â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›          â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

## ğŸ”„ Upload Flow

```
USER ACTIONS                    SYSTEM ACTIONS
â”â”â”â”â”â”â”â”â”â”â”â”                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ Tap Camera/Gallery
                        â”€â”€â”€â”€â”€>  Request Permissions
                                âœ“ Camera access
                                âœ“ Media library access

2ï¸âƒ£ Take/Select Photo
                        â”€â”€â”€â”€â”€>  Store local URI
                                Show preview

3ï¸âƒ£ Tap Upload Button
                        â”€â”€â”€â”€â”€>  Read file as Base64
                                Convert to Blob
                                Generate filename
                                Upload to Supabase Storage
                                âœ“ Photo stored in cloud

4ï¸âƒ£ Wait for Success
                        â”€â”€â”€â”€â”€>  Get public URL
                                Save metadata to database
                                âœ“ Record in contract_photos table

5ï¸âƒ£ View Gallery
                        â”€â”€â”€â”€â”€>  Query database
                                Fetch photo URLs
                                Display in grid
                                âœ“ Show all photos
```

## ğŸ“Š Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. LOCAL PHOTO                                              â”‚
â”‚    file:///path/to/photo.jpg                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. BASE64 ENCODING                                          â”‚
â”‚    data:image/jpeg;base64,/9j/4AAQSkZJRg...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. BLOB CONVERSION                                          â”‚
â”‚    Blob { type: 'image/jpeg', size: 1234567 }               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. SUPABASE STORAGE                                         â”‚
â”‚    contract-photos/CONTRACT-123/photo_0_1234567890.jpg      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. PUBLIC URL                                               â”‚
â”‚    https://xxx.supabase.co/storage/v1/object/public/...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. DATABASE METADATA                                        â”‚
â”‚    {                                                        â”‚
â”‚      id: 'uuid',                                            â”‚
â”‚      contract_id: 'CONTRACT-123',                           â”‚
â”‚      photo_url: 'https://...',                              â”‚
â”‚      photo_type: 'general',                                 â”‚
â”‚      description: 'Photo 1',                                â”‚
â”‚      created_at: '2025-10-23T...'                           â”‚
â”‚    }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Component Hierarchy

```
App
â””â”€â”€ Navigation
    â””â”€â”€ Settings Tab
        â””â”€â”€ Developer/Test Section
            â””â”€â”€ Photo Upload Test Page
                â”œâ”€â”€ Header
                â”œâ”€â”€ Contract ID Input
                â”œâ”€â”€ Action Buttons
                â”‚   â”œâ”€â”€ Camera Button
                â”‚   â””â”€â”€ Gallery Button
                â”œâ”€â”€ Preview Section
                â”‚   â”œâ”€â”€ Photo Thumbnails
                â”‚   â””â”€â”€ Upload Button
                â””â”€â”€ Gallery Section
                    â”œâ”€â”€ Refresh Button
                    â”œâ”€â”€ Photo Grid
                    â””â”€â”€ Full Screen Modal
```

## ğŸ“ File Structure

```
project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (tabs)/
â”‚   â”‚   â””â”€â”€ settings.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ¨ Updated (Test link added)
â”‚   â””â”€â”€ contract-photo-upload-test.tsx â”€â”€ âœ¨ NEW (Test page)
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ photo-capture.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ“ Existing
â”‚   â””â”€â”€ contract-photo-gallery.tsx â”€ âœ¨ NEW (Reusable component)
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ photo-storage.service.ts â”€â”€â”€ âœ“ Existing (Enhanced)
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ CONTRACT_PHOTO_UPLOAD_GUIDE.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ¨ NEW
    â”œâ”€â”€ SUPABASE_PHOTO_SETUP_CHECKLIST.md â”€â”€â”€â”€â”€â”€â”€â”€ âœ¨ NEW
    â”œâ”€â”€ CONTRACT_PHOTOS_IMPLEMENTATION_SUMMARY.md â”€ âœ¨ NEW
    â”œâ”€â”€ PHOTO_UPLOAD_QUICK_START.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ¨ NEW
    â””â”€â”€ PHOTO_SYSTEM_DIAGRAM.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ¨ NEW (This file)
```

## ğŸ—„ï¸ Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           contract_photos                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              UUID (PK)                   â”‚
â”‚ contract_id     UUID (FK â†’ contracts.id)    â”‚
â”‚ photo_url       TEXT                        â”‚
â”‚ photo_type      TEXT                        â”‚
â”‚ description     TEXT                        â”‚
â”‚ created_at      TIMESTAMP                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Foreign Key
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              contracts                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              UUID (PK)                   â”‚
â”‚ user_id         UUID                        â”‚
â”‚ renter_full_name TEXT                       â”‚
â”‚ ...             ...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Security Flow

```
USER REQUEST
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Is Authenticated?â”‚â”€â”€Noâ”€â”€> âŒ 401 Unauthorized
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Yes
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check RLS Policyâ”‚â”€â”€Failâ”€> âŒ 403 Forbidden
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Pass
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validate Data   â”‚â”€â”€Failâ”€> âŒ 400 Bad Request
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Pass
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload to Storageâ”‚â”€â”€Failâ”€> âŒ 500 Server Error
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Success
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save to Databaseâ”‚â”€â”€Failâ”€> âŒ 500 Server Error
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Success
         â–¼
    âœ… 200 OK
 Return photo URL
```

## ğŸ“¸ User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Open Test Page                                      â”‚
â”‚                                                              â”‚
â”‚ Settings â†’ Developer/Test â†’ Photo Upload Test               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Choose Photo Source                                 â”‚
â”‚                                                              â”‚
â”‚ [ğŸ“· Camera]  [ğŸ–¼ï¸ Gallery]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Take/Select Photo                                   â”‚
â”‚                                                              â”‚
â”‚ ğŸ“± Camera opens OR ğŸ–¼ï¸ Gallery opens                         â”‚
â”‚ User takes photo OR selects from gallery                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Preview Photo                                       â”‚
â”‚                                                              â”‚
â”‚ ğŸ–¼ï¸ [Photo Preview] [Ã—]                                      â”‚
â”‚                                                              â”‚
â”‚ [â˜ï¸ Upload to Supabase Storage]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Upload                                              â”‚
â”‚                                                              â”‚
â”‚ â³ Uploading...                                              â”‚
â”‚ âœ… Success! Photo uploaded                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: View in Gallery                                     â”‚
â”‚                                                              â”‚
â”‚ Tap [ğŸ”„ Refresh]                                             â”‚
â”‚                                                              â”‚
â”‚ Gallery:                                                     â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”                                           â”‚
â”‚ â”‚ ğŸ“·â”‚ â”‚ ğŸ“·â”‚ â”‚ ğŸ“·â”‚                                           â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: Full Screen View                                    â”‚
â”‚                                                              â”‚
â”‚ Tap any photo â†’ Full screen viewer opens                    â”‚
â”‚                                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚         â”‚                     â”‚                             â”‚
â”‚         â”‚    ğŸ“· FULL IMAGE    â”‚                             â”‚
â”‚         â”‚                     â”‚                             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                              â”‚
â”‚                              [âœ• Close]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI States

### Empty State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚         ğŸ“·              â”‚
â”‚                         â”‚
â”‚   Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½         â”‚
â”‚   Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚          â”‚
â”‚                         â”‚
â”‚   Î Î±Ï„Î®ÏƒÏ„Îµ "Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·"   â”‚
â”‚   Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ    â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Loading State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚         â³              â”‚
â”‚                         â”‚
â”‚   Î¦ÏŒÏÏ„Ï‰ÏƒÎ·              â”‚
â”‚   Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¹ÏÎ½...       â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gallery State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚ (3)  [+ Add]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”      â”‚
â”‚ â”‚ ğŸ“·â”‚ â”‚ ğŸ“·â”‚ â”‚ ğŸ“·â”‚      â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜      â”‚
â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”            â”‚
â”‚ â”‚ ğŸ“·â”‚ â”‚ ğŸ“·â”‚            â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜            â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ State Management

```
Component State:
â”œâ”€â”€ photos: PhotoItem[]          â”€â”€â”€â”€ Gallery photos
â”œâ”€â”€ isLoading: boolean           â”€â”€â”€â”€ Loading state
â”œâ”€â”€ isUploading: boolean         â”€â”€â”€â”€ Upload state
â”œâ”€â”€ selectedImage: string | null â”€â”€â”€â”€ Full screen viewer
â””â”€â”€ contractId: string           â”€â”€â”€â”€ Current contract

Props (Gallery Component):
â”œâ”€â”€ contractId: string           â”€â”€â”€â”€ Required
â”œâ”€â”€ photoType: string            â”€â”€â”€â”€ Optional
â”œâ”€â”€ maxPhotos: number            â”€â”€â”€â”€ Optional
â”œâ”€â”€ showUploadButton: boolean    â”€â”€â”€â”€ Optional
â”œâ”€â”€ columns: number              â”€â”€â”€â”€ Optional
â””â”€â”€ onPhotosChanged: function    â”€â”€â”€â”€ Optional callback
```

## ğŸš€ Integration Points

```
Your App Pages
â”‚
â”œâ”€â”€ New Contract Page
â”‚   â””â”€â”€ Add: <ContractPhotoGallery contractId={newContract.id} photoType="pickup" />
â”‚
â”œâ”€â”€ Contract Details Page
â”‚   â””â”€â”€ Add: <ContractPhotoGallery contractId={contract.id} photoType="general" />
â”‚
â”œâ”€â”€ Edit Contract Page
â”‚   â””â”€â”€ Add: <ContractPhotoGallery contractId={contract.id} photoType="general" />
â”‚
â”œâ”€â”€ Vehicle Details Page
â”‚   â””â”€â”€ Add: <ContractPhotoGallery contractId={vehicleId} photoType="damage" />
â”‚
â””â”€â”€ PDF Export
    â””â”€â”€ Fetch photos and include in PDF
```

## ğŸ“¦ Dependencies

```
Camera & Gallery:
â”œâ”€â”€ expo-camera           â”€â”€â”€â”€ Camera access
â”œâ”€â”€ expo-image-picker     â”€â”€â”€â”€ Gallery picker
â””â”€â”€ expo-media-library    â”€â”€â”€â”€ Media permissions

File Handling:
â””â”€â”€ expo-file-system      â”€â”€â”€â”€ File operations

Cloud Storage:
â””â”€â”€ @supabase/supabase-js â”€â”€â”€â”€ Supabase client

UI Components:
â”œâ”€â”€ react-native          â”€â”€â”€â”€ Core UI
â””â”€â”€ react-native-safe-area-context â”€â”€â”€â”€ Safe areas
```

## ğŸ¯ Success Metrics

```
âœ… Feature Complete
   â”œâ”€â”€ Camera capture
   â”œâ”€â”€ Gallery picker
   â”œâ”€â”€ Upload to cloud
   â”œâ”€â”€ Database storage
   â”œâ”€â”€ Gallery display
   â””â”€â”€ Full screen viewer

âœ… User Experience
   â”œâ”€â”€ Intuitive UI
   â”œâ”€â”€ Clear feedback
   â”œâ”€â”€ Loading states
   â”œâ”€â”€ Error handling
   â””â”€â”€ Smooth animations

âœ… Code Quality
   â”œâ”€â”€ TypeScript types
   â”œâ”€â”€ JSDoc comments
   â”œâ”€â”€ Error handling
   â”œâ”€â”€ Clean architecture
   â””â”€â”€ Reusable components

âœ… Documentation
   â”œâ”€â”€ Implementation guide
   â”œâ”€â”€ Setup checklist
   â”œâ”€â”€ Quick start guide
   â”œâ”€â”€ API reference
   â””â”€â”€ Visual diagrams
```

---

## ğŸ“š Related Documentation

- **Quick Start**: `PHOTO_UPLOAD_QUICK_START.md`
- **Full Guide**: `CONTRACT_PHOTO_UPLOAD_GUIDE.md`
- **Supabase Setup**: `SUPABASE_PHOTO_SETUP_CHECKLIST.md`
- **Summary**: `CONTRACT_PHOTOS_IMPLEMENTATION_SUMMARY.md`

---

**This visual guide helps you understand the complete photo upload system at a glance!** ğŸ¨ğŸ“¸

